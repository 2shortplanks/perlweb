
[% page.title = 'Your CPAN Notification Subscriptions';
   page.morehead = '
    <script type="text/javascript" src="/i/js/prototype.js"></script>
    <script type="text/javascript" src="/i/js/json.js"></script>
    <script type="text/javascript" src="/i/js/DP_Debug.js"></script>
    <script type="text/javascript" src="/i/js/cpannotify.js"></script>
    <script type="text/javascript" src="/i/js/stripe.js"></script>
    <link rel="stylesheet" type="text/css" href="/i/css/cpannotify.css">
';

 %]

<noscript>
<p>Sorry, this site requires javascript!</p>
</noscript>

<p>

Go to <a href="http://search.cpan.org/">CPAN Search</a> and click on a
"Subscribe" link to add subscriptions.

<img id="busy" style="display: none;"  src="/i/img/progress.gif">

</P>

[% IF add_request  %]
<p id="add_request">

[% IF add_request.subscribed %]
You are already subscribed to notifications for [% add_request.name | html %]
[% ELSE %]

Do you want to subscribe to notifications for [% add_request.name | html %]?<br/>

[% USE URL;
   USE yesuri = url('/api/subscribe', 'type'=add_request.type, sub=add_request.name);
   combust.prototype.link_to_remote( "Yes", update => 'add_request', url => yesuri, complete => 'load_subscriptions()' ) %]
[% combust.prototype.link_to_function( "No", "cancel_subscription()" ) %]

[% END %]

</p>
<p>
  Back to <a href="http://search.cpan.org/[% add_request.type %]/[% add_request.name | uri | html %]">[% add_request.name | html %] on CPAN Search</a>
</p>
[% END %]


<p id="subscriptions">
  <script type="text/javascript">
  <!--
    load_subscriptions();
  -->
  </script>
  Loading your subscriptions...  <i>(javascript must be enabled)</i>
</p>
