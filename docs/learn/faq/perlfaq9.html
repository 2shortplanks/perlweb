[%# DO NOT EDIT THIS FILE, AUTO GENERATED FROM THE perlfaq -%]
    [%-
        # Used to get info from htmlify to ttree
        page.import({
            title    => "perlfaq9",
            section  => "faq",
            description 
                => "Perl Frequently Asked Questions, Perl FAQ",
            keywords => "perl, perl faq, perlfaq"
        });
        perlfaq_version = 5.0150036;
    -%]
    <div class="pod">

<ul id="index">
  <li><a href="#NAME">NAME</a></li>
  <li><a href="#DESCRIPTION">DESCRIPTION</a>
    <ul>
      <li><a href="#What-is-the-correct-form-of-response-from-a-CGI-script-">What is the correct form of response from a CGI script?</a></li>
      <li><a href="#My-CGI-script-runs-from-the-command-line-but-not-the-browser.-500-Server-Error-">My CGI script runs from the command line but not the browser. (500 Server Error)</a></li>
      <li><a href="#How-can-I-get-better-error-messages-from-a-CGI-program-">How can I get better error messages from a CGI program?</a></li>
      <li><a href="#How-do-I-remove-HTML-from-a-string-">How do I remove HTML from a string?</a></li>
      <li><a href="#How-do-I-extract-URLs-">How do I extract URLs?</a></li>
      <li><a href="#How-do-I-download-a-file-from-the-users-machine-How-do-I-open-a-file-on-another-machine-">How do I download a file from the user&#39;s machine? How do I open a file on another machine?</a></li>
      <li><a href="#How-do-I-make-an-HTML-pop-up-menu-with-Perl-">How do I make an HTML pop-up menu with Perl?</a></li>
      <li><a href="#How-do-I-fetch-an-HTML-file-">How do I fetch an HTML file?</a></li>
      <li><a href="#How-do-I-automate-an-HTML-form-submission-">How do I automate an HTML form submission?</a></li>
      <li><a href="#How-do-I-decode-or-create-those--encodings-on-the-web-">How do I decode or create those %-encodings on the web?     </a></li>
      <li><a href="#How-do-I-redirect-to-another-page-">How do I redirect to another page?</a></li>
      <li><a href="#How-do-I-put-a-password-on-my-web-pages-">How do I put a password on my web pages?</a></li>
      <li><a href="#How-do-I-edit-my-.htpasswd-and-.htgroup-files-with-Perl-">How do I edit my .htpasswd and .htgroup files with Perl?</a></li>
      <li><a href="#How-do-I-make-sure-users-cant-enter-values-into-a-form-that-causes-my-CGI-script-to-do-bad-things-">How do I make sure users can&#39;t enter values into a form that causes my CGI script to do bad things?</a></li>
      <li><a href="#How-do-I-parse-a-mail-header-">How do I parse a mail header?</a></li>
      <li><a href="#How-do-I-decode-a-CGI-form-">How do I decode a CGI form?</a></li>
      <li><a href="#How-do-I-check-a-valid-mail-address-">How do I check a valid mail address?</a></li>
      <li><a href="#How-do-I-decode-a-MIME-BASE64-string-">How do I decode a MIME/BASE64 string?</a></li>
      <li><a href="#How-do-I-return-the-users-mail-address-">How do I return the user&#39;s mail address?</a></li>
      <li><a href="#How-do-I-send-email-">How do I send email?</a></li>
      <li><a href="#How-do-I-use-MIME-to-make-an-attachment-to-a-mail-message-">How do I use MIME to make an attachment to a mail message?</a></li>
      <li><a href="#How-do-I-read-email-">How do I read email?</a></li>
      <li><a href="#How-do-I-find-out-my-hostname-domainname-or-IP-address-">How do I find out my hostname, domainname, or IP address? </a></li>
      <li><a href="#How-do-I-fetch-a-news-article-or-the-active-newsgroups-">How do I fetch a news article or the active newsgroups?</a></li>
      <li><a href="#How-do-I-fetch-put-an-FTP-file-">How do I fetch/put an FTP file?</a></li>
      <li><a href="#How-can-I-do-RPC-in-Perl-">How can I do RPC in Perl?</a></li>
    </ul>
  </li>
  <li><a href="#AUTHOR-AND-COPYRIGHT">AUTHOR AND COPYRIGHT</a></li>
</ul>

<h1 id="NAME">NAME</h1>

<p>perlfaq9 - Networking</p>

<h1 id="DESCRIPTION">DESCRIPTION</h1>

<p>This section deals with questions related to networking, the Internet, and a few about the Web.</p>

<h2 id="What-is-the-correct-form-of-response-from-a-CGI-script-">What is the correct form of response from a CGI script?</h2>

<p>(Alan Flavell &lt;flavell+www@a5.ph.gla.ac.uk&gt; answers...)</p>

<p>The Common Gateway Interface (CGI) specifies a software interface between a program (&quot;CGI script&quot;) and a web server (HTTPD). It is not specific to Perl, and has its own FAQs and tutorials, and a Usenet group, comp.infosystems.www.authoring.cgi.</p>

<p>The CGI specification is outlined in an informational RFC: <a href="http://www.ietf.org/rfc/rfc3875">http://www.ietf.org/rfc/rfc3875</a></p>

<p>These Perl FAQs very selectively cover some CGI issues. However, Perl programmers are strongly advised to use the <code>CGI.pm</code> module, to take care of the details for them.</p>

<p>The similarity between CGI response headers (defined in the CGI specification) and HTTP response headers (defined in the HTTP specification, RFC2616) is intentional, but can sometimes be confusing.</p>

<p>The CGI specification defines two kinds of script: the &quot;Parsed Header&quot; script, and the &quot;Non Parsed Header&quot; (NPH) script. Check your server documentation to see what it supports. &quot;Parsed Header&quot; scripts are simpler in various respects. The CGI specification allows any of the usual newline representations in the CGI response (it&#39;s the server&#39;s job to create an accurate HTTP response based on it). So &quot;\n&quot; written in text mode is technically correct, and recommended. NPH scripts are more tricky: they must put out a complete and accurate set of HTTP transaction response headers; the HTTP specification calls for records to be terminated with carriage-return and line-feed; i.e., ASCII \015\012 written in binary mode.</p>

<p>Using <code>CGI.pm</code> gives excellent platform independence, including EBCDIC systems. <code>CGI.pm</code> selects an appropriate newline representation (<code>$CGI::CRLF</code>) and sets binmode as appropriate.</p>

<h2 id="My-CGI-script-runs-from-the-command-line-but-not-the-browser.-500-Server-Error-">My CGI script runs from the command line but not the browser. (500 Server Error)</h2>

<p>(contributed by brian d foy)</p>

<p>There are many things that might be wrong with your CGI program, and only some of them might be related to Perl. Try going through the <a href="https://metacpan.org/module/http://www.perlmonks.org/?node_id=380424">troubleshooting guide</a> on <a href="https://metacpan.org/module/http://www.perlmonks.org/">Perlmonks</a> .</p>

<h2 id="How-can-I-get-better-error-messages-from-a-CGI-program-">How can I get better error messages from a CGI program?</h2>

<p>Use the <a href="https://metacpan.org/module/CGI::Carp">CGI::Carp</a> module. It replaces <code>warn</code> and <code>die</code>, plus the normal <a href="https://metacpan.org/module/Carp">Carp</a> module&#39;s <code>carp</code>, <code>croak</code>, and <code>confess</code> functions with more verbose and safer versions. It still sends them to the normal server error log.</p>

<pre class="brush: pl; class-name: 'highlight'; toolbar: false; gutter: false">    use CGI::Carp;
    warn &quot;This is a complaint&quot;;
    die &quot;But this one is serious&quot;;</pre>

<p>The following use of <a href="https://metacpan.org/module/CGI::Carp">CGI::Carp</a> also redirects errors to a file of your choice, placed in a <code>BEGIN</code> block to catch compile-time warnings as well:</p>

<pre class="brush: pl; class-name: 'highlight'; toolbar: false; gutter: false">    use vars qw($log_fh);
    BEGIN {
        use CGI::Carp qw(carpout);
        open($log_fh, &quot;&gt;&gt;/var/local/cgi-logs/mycgi-log&quot;)
            or die &quot;Unable to append to mycgi-log: $!\n&quot;;
        carpout(*LOG);
    }</pre>

<p>You can even arrange for fatal errors to go back to the client browser, which is nice for your own debugging, but might confuse the end user.</p>

<pre class="brush: pl; class-name: 'highlight'; toolbar: false; gutter: false">    use CGI::Carp qw(fatalsToBrowser);
    die &quot;Bad error here&quot;;</pre>

<p>Even if the error happens before you get the HTTP header out, the module will try to take care of this to avoid the dreaded server 500 errors. Normal warnings still go out to the server error log (or wherever you&#39;ve sent them with <code>carpout</code>) with the application name and date stamp prepended.</p>

<h2 id="How-do-I-remove-HTML-from-a-string-">How do I remove HTML from a string?</h2>

<p>The most correct way (albeit not the fastest) is to use <a href="https://metacpan.org/module/HTML::Parser">HTML::Parser</a> from CPAN. Another mostly correct way is to use <a href="https://metacpan.org/module/HTML::FormatText">HTML::FormatText</a> which not only removes HTML but also attempts to do a little simple formatting of the resulting plain text.</p>

<p>Many folks attempt a simple-minded regular expression approach, like <code>s/&lt;.*?&gt;//g</code>, but that fails in many cases because the tags may continue over line breaks, they may contain quoted angle-brackets, or HTML comments may be present. Plus, folks forget to convert entities--like <code>&amp;lt;</code> for example.</p>

<p>Here&#39;s one &quot;simple-minded&quot; approach, that works for most files:</p>

<pre class="brush: pl; class-name: 'highlight'; toolbar: false; gutter: false">    #!/usr/bin/perl -p0777
    s/&lt;(?:[^&gt;&#39;&quot;]*|([&#39;&quot;]).*?\g1)*&gt;//gs</pre>

<p>If you want a more complete solution, see the 3-stage striphtml program in <a href="http://www.cpan.org/authors/Tom_Christiansen/scripts/striphtml.gz">http://www.cpan.org/authors/Tom_Christiansen/scripts/striphtml.gz</a> .</p>

<p>Here are some tricky cases that you should think about when picking a solution:</p>

<pre class="brush: pl; class-name: 'highlight'; toolbar: false; gutter: false">    &lt;IMG SRC = &quot;foo.gif&quot; ALT = &quot;A &gt; B&quot;&gt;

    &lt;IMG SRC = &quot;foo.gif&quot;
     ALT = &quot;A &gt; B&quot;&gt;

    &lt;!-- &lt;A comment&gt; --&gt;

    &lt;script&gt;if (a&lt;b &amp;&amp; a&gt;c)&lt;/script&gt;

    &lt;# Just data #&gt;

    &lt;![INCLUDE CDATA [ &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; ]]&gt;</pre>

<p>If HTML comments include other tags, those solutions would also break on text like this:</p>

<pre class="brush: pl; class-name: 'highlight'; toolbar: false; gutter: false">    &lt;!-- This section commented out.
        &lt;B&gt;You can&#39;t see me!&lt;/B&gt;
    --&gt;</pre>

<h2 id="How-do-I-extract-URLs-">How do I extract URLs?</h2>

<p>You can easily extract all sorts of URLs from HTML with <a href="https://metacpan.org/module/HTML::SimpleLinkExtor">HTML::SimpleLinkExtor</a> which handles anchors, images, objects, frames, and many other tags that can contain a URL. If you need anything more complex, you can create your own subclass of <a href="https://metacpan.org/module/HTML::LinkExtor">HTML::LinkExtor</a> or <a href="https://metacpan.org/module/HTML::Parser">HTML::Parser</a>. You might even use <a href="https://metacpan.org/module/HTML::SimpleLinkExtor">HTML::SimpleLinkExtor</a> as an example for something specifically suited to your needs.</p>

<p>You can use <a href="https://metacpan.org/module/URI::Find">URI::Find</a> to extract URLs from an arbitrary text document.</p>

<p>Less complete solutions involving regular expressions can save you a lot of processing time if you know that the input is simple. One solution from Tom Christiansen runs 100 times faster than most module-based approaches but only extracts URLs from anchors where the first attribute is HREF and there are no other attributes.</p>

<pre class="brush: pl; class-name: 'highlight'; toolbar: false; gutter: false">    #!/usr/bin/perl -n00
    # qxurl - tchrist@perl.com
    print &quot;$2\n&quot; while m{
        &lt; \s*
          A \s+ HREF \s* = \s* ([&quot;&#39;]) (.*?) \g1
        \s* &gt;
    }gsix;</pre>

<h2 id="How-do-I-download-a-file-from-the-users-machine-How-do-I-open-a-file-on-another-machine-">How do I download a file from the user&#39;s machine? How do I open a file on another machine?</h2>

<p>In this case, download means to use the file upload feature of HTML forms. You allow the web surfer to specify a file to send to your web server. To you it looks like a download, and to the user it looks like an upload. No matter what you call it, you do it with what&#39;s known as <b>multipart/form-data</b> encoding. The <code>CGI.pm</code> module (which comes with Perl as part of the Standard Library) supports this in the <code>start_multipart_form()</code> method, which isn&#39;t the same as the <code>startform()</code> method.</p>

<p>See the section in the <code>CGI.pm</code> documentation on file uploads for code examples and details.</p>

<h2 id="How-do-I-make-an-HTML-pop-up-menu-with-Perl-">How do I make an HTML pop-up menu with Perl?</h2>

<p>(contributed by brian d foy)</p>

<p>The <code>CGI.pm</code> module (which comes with Perl) has functions to create the HTML form widgets. See the <code>CGI.pm</code> documentation for more examples.</p>

<pre class="brush: pl; class-name: 'highlight'; toolbar: false; gutter: false">    use CGI qw/:standard/;
    print header,
        start_html(&#39;Favorite Animals&#39;),

        start_form,
            &quot;What&#39;s your favorite animal? &quot;,
        popup_menu(
            -name   =&gt; &#39;animal&#39;,
            -values =&gt; [ qw( Llama Alpaca Camel Ram ) ]
            ),
        submit,

        end_form,
        end_html;</pre>

<h2 id="How-do-I-fetch-an-HTML-file-">How do I fetch an HTML file?</h2>

<p>(contributed by brian d foy)</p>

<p>Use the libwww-perl distribution. The <a href="https://metacpan.org/module/LWP::Simple">LWP::Simple</a> module can fetch web resources and give their content back to you as a string:</p>

<pre class="brush: pl; class-name: 'highlight'; toolbar: false; gutter: false">    use LWP::Simple qw(get);

    my $html = get( &quot;http://www.example.com/index.html&quot; );</pre>

<p>It can also store the resource directly in a file:</p>

<pre class="brush: pl; class-name: 'highlight'; toolbar: false; gutter: false">    use LWP::Simple qw(getstore);

    getstore( &quot;http://www.example.com/index.html&quot;, &quot;foo.html&quot; );</pre>

<p>If you need to do something more complicated, you can use <a href="https://metacpan.org/module/LWP::UserAgent">LWP::UserAgent</a> module to create your own user-agent (e.g. browser) to get the job done. If you want to simulate an interactive web browser, you can use the <a href="https://metacpan.org/module/WWW::Mechanize">WWW::Mechanize</a> module.</p>

<h2 id="How-do-I-automate-an-HTML-form-submission-">How do I automate an HTML form submission?</h2>

<p>If you are doing something complex, such as moving through many pages and forms or a web site, you can use <a href="https://metacpan.org/module/WWW::Mechanize">WWW::Mechanize</a>. See its documentation for all the details.</p>

<p>If you&#39;re submitting values using the GET method, create a URL and encode the form using the <code>query_form</code> method:</p>

<pre class="brush: pl; class-name: 'highlight'; toolbar: false; gutter: false">    use LWP::Simple;
    use URI::URL;

    my $url = url(&#39;<a href="http://www.perl.com/cgi-bin/cpan_mod&#39;)">http://www.perl.com/cgi-bin/cpan_mod&#39;)</a>;
    $url-&gt;query_form(module =&gt; &#39;DB_File&#39;, readme =&gt; 1);
    $content = get($url);</pre>

<p>If you&#39;re using the POST method, create your own user agent and encode the content appropriately.</p>

<pre class="brush: pl; class-name: 'highlight'; toolbar: false; gutter: false">    use HTTP::Request::Common qw(POST);
    use LWP::UserAgent;

    my $ua = LWP::UserAgent-&gt;new();
    my $req = POST &#39;<a href="http://www.perl.com/cgi-bin/cpan_mod&#39;">http://www.perl.com/cgi-bin/cpan_mod&#39;</a>,
                   [ module =&gt; &#39;DB_File&#39;, readme =&gt; 1 ];
    my $content = $ua-&gt;request($req)-&gt;as_string;</pre>

<h2 id="How-do-I-decode-or-create-those--encodings-on-the-web-">How do I decode or create those %-encodings on the web?     </h2>

<p>(contributed by brian d foy)</p>

<p>Those <code>%</code> encodings handle reserved characters in URIs, as described in RFC 2396, Section 2. This encoding replaces the reserved character with the hexadecimal representation of the character&#39;s number from the US-ASCII table. For instance, a colon, <code>:</code>, becomes <code>%3A</code>.</p>

<p>In CGI scripts, you don&#39;t have to worry about decoding URIs if you are using <code>CGI.pm</code>. You shouldn&#39;t have to process the URI yourself, either on the way in or the way out.</p>

<p>If you have to encode a string yourself, remember that you should never try to encode an already-composed URI. You need to escape the components separately then put them together. To encode a string, you can use the <a href="https://metacpan.org/module/URI::Escape">URI::Escape</a> module. The <code>uri_escape</code> function returns the escaped string:</p>

<pre class="brush: pl; class-name: 'highlight'; toolbar: false; gutter: false">    my $original = &quot;Colon : Hash # Percent %&quot;;

    my $escaped = uri_escape( $original );

    print &quot;$escaped\n&quot;; # &#39;Colon%20%3A%20Hash%20%23%20Percent%20%25&#39;</pre>

<p>To decode the string, use the <code>uri_unescape</code> function:</p>

<pre class="brush: pl; class-name: 'highlight'; toolbar: false; gutter: false">    my $unescaped = uri_unescape( $escaped );

    print $unescaped; # back to original</pre>

<p>If you wanted to do it yourself, you simply need to replace the reserved characters with their encodings. A global substitution is one way to do it:</p>

<pre class="brush: pl; class-name: 'highlight'; toolbar: false; gutter: false">    # encode
    $string =~ s/([^^A-Za-z0-9\-_.!~*&#39;()])/ sprintf &quot;%%%0x&quot;, ord $1 /eg;

    #decode
    $string =~ s/%([A-Fa-f\d]{2})/chr hex $1/eg;</pre>

<h2 id="How-do-I-redirect-to-another-page-">How do I redirect to another page?</h2>

<p>Specify the complete URL of the destination (even if it is on the same server). This is one of the two different kinds of CGI &quot;Location:&quot; responses which are defined in the CGI specification for a Parsed Headers script. The other kind (an absolute URLpath) is resolved internally to the server without any HTTP redirection. The CGI specifications do not allow relative URLs in either case.</p>

<p>Use of <code>CGI.pm</code> is strongly recommended. This example shows redirection with a complete URL. This redirection is handled by the web browser.</p>

<pre class="brush: pl; class-name: 'highlight'; toolbar: false; gutter: false">    use CGI qw/:standard/;

    my $url = &#39;<a href="http://www.cpan.org/&#39;">http://www.cpan.org/&#39;</a>;
    print redirect($url);</pre>

<p>This example shows a redirection with an absolute URLpath. This redirection is handled by the local web server.</p>

<pre class="brush: pl; class-name: 'highlight'; toolbar: false; gutter: false">    my $url = &#39;/CPAN/index.html&#39;;
    print redirect($url);</pre>

<p>But if coded directly, it could be as follows (the final &quot;\n&quot; is shown separately, for clarity), using either a complete URL or an absolute URLpath.</p>

<pre class="brush: pl; class-name: 'highlight'; toolbar: false; gutter: false">    print &quot;Location: $url\n&quot;;   # CGI response header
    print &quot;\n&quot;;                 # end of headers</pre>

<h2 id="How-do-I-put-a-password-on-my-web-pages-">How do I put a password on my web pages?</h2>

<p>To enable authentication for your web server, you need to configure your web server. The configuration is different for different sorts of web servers--apache does it differently from iPlanet which does it differently from IIS. Check your web server documentation for the details for your particular server.</p>

<h2 id="How-do-I-edit-my-.htpasswd-and-.htgroup-files-with-Perl-">How do I edit my .htpasswd and .htgroup files with Perl?</h2>

<p>The <a href="https://metacpan.org/module/HTTPD::UserAdmin">HTTPD::UserAdmin</a> and <a href="https://metacpan.org/module/HTTPD::GroupAdmin">HTTPD::GroupAdmin</a> modules provide a consistent OO interface to these files, regardless of how they&#39;re stored. Databases may be text, dbm, Berkeley DB or any database with a DBI compatible driver. <a href="https://metacpan.org/module/HTTPD::UserAdmin">HTTPD::UserAdmin</a> supports files used by the &quot;Basic&quot; and &quot;Digest&quot; authentication schemes. Here&#39;s an example:</p>

<pre class="brush: pl; class-name: 'highlight'; toolbar: false; gutter: false">    use HTTPD::UserAdmin ();
    HTTPD::UserAdmin
      -&gt;new(DB =&gt; &quot;/foo/.htpasswd&quot;)
      -&gt;add($username =&gt; $password);</pre>

<h2 id="How-do-I-make-sure-users-cant-enter-values-into-a-form-that-causes-my-CGI-script-to-do-bad-things-">How do I make sure users can&#39;t enter values into a form that causes my CGI script to do bad things?</h2>

<p>(contributed by brian d foy)</p>

<p>You can&#39;t prevent people from sending your script bad data. Even if you add some client-side checks, people may disable them or bypass them completely. For instance, someone might use a module such as <a href="https://metacpan.org/module/LWP">LWP</a> to access your CGI program. If you want to prevent data that try to use SQL injection or other sorts of attacks (and you should want to), you have to not trust any data that enter your program.</p>

<p>The <a href="https://metacpan.org/module/perlsec">perlsec</a> documentation has general advice about data security. If you are using the <a href="https://metacpan.org/module/DBI">DBI</a> module, use placeholder to fill in data. If you are running external programs with <code>system</code> or <code>exec</code>, use the list forms. There are many other precautions that you should take, too many to list here, and most of them fall under the category of not using any data that you don&#39;t intend to use. Trust no one.</p>

<h2 id="How-do-I-parse-a-mail-header-">How do I parse a mail header?</h2>

<p>Use the <a href="https://metacpan.org/module/Email::MIME">Email::MIME</a> module. It&#39;s well-tested and supports all the craziness that you&#39;ll see in the real world (comment-folding whitespace, encodings, comments, etc.).</p>

<pre class="brush: pl; class-name: 'highlight'; toolbar: false; gutter: false">  use Email::MIME;

  my $message = Email::MIME-&gt;new($rfc2822);
  my $subject = $message-&gt;header(&#39;Subject&#39;);
  my $from    = $message-&gt;header(&#39;From&#39;);</pre>

<p>If you&#39;ve already got some other kind of email object, consider passing it to <a href="https://metacpan.org/module/Email::Abstract">Email::Abstract</a> and then using its cast method to get an <a href="https://metacpan.org/module/Email::MIME">Email::MIME</a> object:</p>

<pre class="brush: pl; class-name: 'highlight'; toolbar: false; gutter: false">  my $mail_message_object = read_message();
  my $abstract = Email::Abstract-&gt;new($mail_message_object);
  my $email_mime_object = $abstract-&gt;cast(&#39;Email::MIME&#39;);</pre>

<h2 id="How-do-I-decode-a-CGI-form-">How do I decode a CGI form?</h2>

<p>(contributed by brian d foy)</p>

<p>Use the <code>CGI.pm</code> module that comes with Perl. It&#39;s quick, it&#39;s easy, and it actually does quite a bit of work to ensure things happen correctly. It handles GET, POST, and HEAD requests, multipart forms, multivalued fields, query string and message body combinations, and many other things you probably don&#39;t want to think about.</p>

<p>It doesn&#39;t get much easier: the <code>CGI.pm</code> module automatically parses the input and makes each value available through the <code>param()</code> function.</p>

<pre class="brush: pl; class-name: 'highlight'; toolbar: false; gutter: false">    use CGI qw(:standard);

    my $total = param( &#39;price&#39; ) + param( &#39;shipping&#39; );

    my @items = param( &#39;item&#39; ); # multiple values, same field name</pre>

<p>If you want an object-oriented approach, <code>CGI.pm</code> can do that too.</p>

<pre class="brush: pl; class-name: 'highlight'; toolbar: false; gutter: false">    use CGI;

    my $cgi = CGI-&gt;new();

    my $total = $cgi-&gt;param( &#39;price&#39; ) + $cgi-&gt;param( &#39;shipping&#39; );

    my @items = $cgi-&gt;param( &#39;item&#39; );</pre>

<p>You might also try <a href="https://metacpan.org/module/CGI::Minimal">CGI::Minimal</a> which is a lightweight version of the same thing. Other CGI::* modules on CPAN might work better for you, too.</p>

<p>Many people try to write their own decoder (or copy one from another program) and then run into one of the many &quot;gotchas&quot; of the task. It&#39;s much easier and less of a hassle to use <code>CGI.pm</code>.</p>

<h2 id="How-do-I-check-a-valid-mail-address-">How do I check a valid mail address?</h2>

<p>(partly contributed by Aaron Sherman)</p>

<p>This isn&#39;t as simple a question as it sounds. There are two parts:</p>

<p>a) How do I verify that an email address is correctly formatted?</p>

<p>b) How do I verify that an email address targets a valid recipient?</p>

<p>Without sending mail to the address and seeing whether there&#39;s a human on the other end to answer you, you cannot fully answer part <i>b</i>, but the <a href="https://metacpan.org/module/Email::Valid">Email::Valid</a> module will do both part <i>a</i> and part <i>b</i> as far as you can in real-time.</p>

<p>Our best advice for verifying a person&#39;s mail address is to have them enter their address twice, just as you normally do to change a password. This usually weeds out typos. If both versions match, send mail to that address with a personal message. If you get the message back and they&#39;ve followed your directions, you can be reasonably assured that it&#39;s real.</p>

<p>A related strategy that&#39;s less open to forgery is to give them a PIN (personal ID number). Record the address and PIN (best that it be a random one) for later processing. In the mail you send, include a link to your site with the PIN included. If the mail bounces, you know it&#39;s not valid. If they don&#39;t click on the link, either they forged the address or (assuming they got the message) following through wasn&#39;t important so you don&#39;t need to worry about it.</p>

<h2 id="How-do-I-decode-a-MIME-BASE64-string-">How do I decode a MIME/BASE64 string?</h2>

<p>The <a href="https://metacpan.org/module/MIME::Base64">MIME::Base64</a> package handles this as well as the MIME/QP encoding. Decoding base 64 becomes as simple as:</p>

<pre class="brush: pl; class-name: 'highlight'; toolbar: false; gutter: false">    use MIME::Base64;
    my $decoded = decode_base64($encoded);</pre>

<p>The <a href="https://metacpan.org/module/Email::MIME">Email::MIME</a> module can decode base 64-encoded email message parts transparently so the developer doesn&#39;t need to worry about it.</p>

<h2 id="How-do-I-return-the-users-mail-address-">How do I return the user&#39;s mail address?</h2>

<p>Ask them for it. There are so many email providers available that it&#39;s rather unlikely the local system has any idea how to determine a user&#39;s email address. The one notable exception is for organization-specific email (e.g. foo@yourcompany.com) where policy can be codified in your program. In that case, you can look at $ENV{USER}, $ENV{LOGNAME}, and getpwuid($&lt;) in scalar context, like so:</p>

<pre class="brush: pl; class-name: 'highlight'; toolbar: false; gutter: false">  my $user_name = getpwuid($&lt;)</pre>

<p>But note that you still cannot make any assumptions about whether this is correct unless your policy says it is. And then there are things like localpart extensions (foo+bar@example.com). You really are best off asking the user.</p>

<h2 id="How-do-I-send-email-">How do I send email?</h2>

<p>Use the <a href="https://metacpan.org/module/Email::MIME">Email::MIME</a> and <a href="https://metacpan.org/module/Email::Sender::Simple">Email::Sender::Simple</a> modules, like so:</p>

<pre class="brush: pl; class-name: 'highlight'; toolbar: false; gutter: false">  # first, create your message
  my $message = Email::MIME-&gt;create(
    header_str =&gt; [
      From    =&gt; &#39;you@example.com&#39;,
      To      =&gt; &#39;friend@example.com&#39;,
      Subject =&gt; &#39;Happy birthday!&#39;,
    ],
    body_str =&gt; &#39;Happy birthday to you!&#39;,
  );

  use Email::Sender::Simple qw(sendmail);
  sendmail($message);</pre>

<p>By default, <a href="https://metacpan.org/module/Email::Sender::Simple">Email::Sender::Simple</a> will try `sendmail` first, if it exists in your $PATH. This generally isn&#39;t the case. If there&#39;s a remote mail server you use to send mail, consider investigating one of the Transport classes. At time of writing, the available transports include:</p>

<dl>

<dt><a href="https://metacpan.org/module/Email::Sender::Transport::Sendmail">Email::Sender::Transport::Sendmail</a></dt>
<dd>

<p>This is the default. If you can use the <a href="http://man.he.net/man1/mail">mail(1)</a> or <a href="http://man.he.net/man1/mailx">mailx(1)</a> program to send mail from the machine where your code runs, you should be able to use this.</p>

</dd>
<dt><a href="https://metacpan.org/module/Email::Sender::Transport::SMTP">Email::Sender::Transport::SMTP</a></dt>
<dd>

<p>This transport contacts a remote SMTP server over TCP. It optionally uses SSL and can authenticate to the server via SASL.</p>

</dd>
<dt><a href="https://metacpan.org/module/Email::Sender::Transport::SMTP::TLS">Email::Sender::Transport::SMTP::TLS</a></dt>
<dd>

<p>This is like the SMTP transport, but uses TLS security. You can authenticate with this module as well, using any mechanisms your server supports after STARTTLS.</p>

</dd>
</dl>

<p>Telling <a href="https://metacpan.org/module/Email::Sender::Simple">Email::Sender::Simple</a> to use your transport is straightforward.</p>

<pre class="brush: pl; class-name: 'highlight'; toolbar: false; gutter: false">  sendmail(
    $message,
    {
      transport =&gt; $email_sender_transport_object,
    }
  );</pre>

<h2 id="How-do-I-use-MIME-to-make-an-attachment-to-a-mail-message-">How do I use MIME to make an attachment to a mail message?</h2>

<p><a href="https://metacpan.org/module/Email::MIME">Email::MIME</a> directly supports multipart messages. <a href="https://metacpan.org/module/Email::MIME">Email::MIME</a> objects themselves are parts and can be attached to other <a href="https://metacpan.org/module/Email::MIME">Email::MIME</a> objects. Consult the <a href="https://metacpan.org/module/Email::MIME">Email::MIME</a> documentation for more information, including all of the supported methods and examples of their use.</p>

<h2 id="How-do-I-read-email-">How do I read email?</h2>

<p>Use the <a href="https://metacpan.org/module/Email::Folder">Email::Folder</a> module, like so:</p>

<pre class="brush: pl; class-name: 'highlight'; toolbar: false; gutter: false">  use Email::Folder;

  my $folder = Email::Folder-&gt;new(&#39;/path/to/email/folder&#39;);
  while(my $message = $folder-&gt;next_message) {
    # next_message returns Email::Simple objects, but we want
    # Email::MIME objects as they&#39;re more robust
    my $mime = Email::MIME-&gt;new($message-&gt;as_string);
  }</pre>

<p>There are different classes in the <a href="https://metacpan.org/module/Email::Folder">Email::Folder</a> namespace for supporting various mailbox types. Note that these modules are generally rather limited and only support <b>reading</b> rather than writing.</p>

<h2 id="How-do-I-find-out-my-hostname-domainname-or-IP-address-">How do I find out my hostname, domainname, or IP address? </h2>

<p>(contributed by brian d foy)</p>

<p>The <a href="https://metacpan.org/module/Net::Domain">Net::Domain</a> module, which is part of the Standard Library starting in Perl 5.7.3, can get you the fully qualified domain name (FQDN), the host name, or the domain name.</p>

<pre class="brush: pl; class-name: 'highlight'; toolbar: false; gutter: false">    use Net::Domain qw(hostname hostfqdn hostdomain);

    my $host = hostfqdn();</pre>

<p>The <a href="https://metacpan.org/module/Sys::Hostname">Sys::Hostname</a> module, part of the Standard Library, can also get the hostname:</p>

<pre class="brush: pl; class-name: 'highlight'; toolbar: false; gutter: false">    use Sys::Hostname;

    $host = hostname();</pre>

<p>The <a href="https://metacpan.org/module/Sys::Hostname::Long">Sys::Hostname::Long</a> module takes a different approach and tries harder to return the fully qualified hostname:</p>

<pre class="brush: pl; class-name: 'highlight'; toolbar: false; gutter: false">  use Sys::Hostname::Long &#39;hostname_long&#39;;

  my $hostname = hostname_long();</pre>

<p>To get the IP address, you can use the <code>gethostbyname</code> built-in function to turn the name into a number. To turn that number into the dotted octet form (a.b.c.d) that most people expect, use the <code>inet_ntoa</code> function from the <a href="https://metacpan.org/module/Socket">Socket</a> module, which also comes with perl.</p>

<pre class="brush: pl; class-name: 'highlight'; toolbar: false; gutter: false">    use Socket;

    my $address = inet_ntoa(
        scalar gethostbyname( $host || &#39;localhost&#39; )
    );</pre>

<h2 id="How-do-I-fetch-a-news-article-or-the-active-newsgroups-">How do I fetch a news article or the active newsgroups?</h2>

<p>Use the <a href="https://metacpan.org/module/Net::NNTP">Net::NNTP</a> or <a href="https://metacpan.org/module/News::NNTPClient">News::NNTPClient</a> modules, both available from CPAN. This can make tasks like fetching the newsgroup list as simple as</p>

<pre class="brush: pl; class-name: 'highlight'; toolbar: false; gutter: false">    perl -MNews::NNTPClient
      -e &#39;print News::NNTPClient-&gt;new-&gt;list(&quot;newsgroups&quot;)&#39;</pre>

<h2 id="How-do-I-fetch-put-an-FTP-file-">How do I fetch/put an FTP file?</h2>

<p>(contributed by brian d foy)</p>

<p>The <a href="https://metacpan.org/module/LWP">LWP</a> family of modules (available on CPAN as the libwww-perl distribution) can work with FTP just like it can with many other protocols. <a href="https://metacpan.org/module/LWP::Simple">LWP::Simple</a> makes it quite easy to fetch a file:</p>

<pre class="brush: pl; class-name: 'highlight'; toolbar: false; gutter: false">    use LWP::Simple;

    my $data = get( &#39;<a href="ftp://some.ftp.site/some/file.txt&#39;">ftp://some.ftp.site/some/file.txt&#39;</a> );</pre>

<p>If you want more direct or low-level control of the FTP process, you can use the <a href="https://metacpan.org/module/Net::FTP">Net::FTP</a> module (in the Standard Library since Perl 5.8). Its documentation has examples showing you just how to do that.</p>

<h2 id="How-can-I-do-RPC-in-Perl-">How can I do RPC in Perl?</h2>

<p>(contributed by brian d foy)</p>

<p>Use one of the RPC modules you can find on CPAN ( <a href="http://search.cpan.org/search?query=RPC&amp;mode=all">http://search.cpan.org/search?query=RPC&amp;mode=all</a> ).</p>

<h1 id="AUTHOR-AND-COPYRIGHT">AUTHOR AND COPYRIGHT</h1>

<p>Copyright (c) 1997-2010 Tom Christiansen, Nathan Torkington, and other authors as noted. All rights reserved.</p>

<p>This documentation is free; you can redistribute it and/or modify it under the same terms as Perl itself.</p>

<p>Irrespective of its distribution, all code examples in this file are hereby placed into the public domain. You are permitted and encouraged to use this code in your own programs for fun or for profit as you see fit. A simple comment in the code giving credit would be courteous but is not required.</p>

<p><em>Version: 5.0150036</em></p></div>

