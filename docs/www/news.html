[% META title = 'News' %]
[% page.style = "perl-directory.html" %]

[% page.sidebar = BLOCK %]
  <DIV class="NAVITEM">
    <H3>News</H3>
    <a href="#useperl">use.perl</a>
    <BR><a href="#cpanrecent">Recent CPAN Uploads</a>
    <BR><a href="#perlbuzz">Perl Buzz</a>
  </DIV>
[% END %]

[%# 
    Start of Main Content Section ------------------------
%] 

[% USE HTML %]

[% MACRO newsitem(item) BLOCK %]
 <a href="[% item.link | html%]"><B>[% item.title %]</b></a>
   <div class="newsitem">[% item.description %]</div>
   <br>
[% END %]

[% MACRO newsentry(shortname,longname,limit,url) BLOCK %]
[%-TRY %]
<A NAME="[% shortname %]"></A>
<h3><A HREF="[% url %] ">[% longname %]</A></H3>
    [% USE news = XML.RSS("${root}/var/rss/${shortname}.rss") %]
    <UL>
    [% FOREACH item = news.items %]
       [%- LAST IF loop.count() > limit %]
       <LI>[% newsitem(item) %]</LI>
    [%- END %]
    </UL>
[%-CATCH %]
[Error processing directive]
[%-END %]
[% END %]

<p>
[% newsentry('useperl','use.perl', '5', 'http://use.perl.org') %]
[% newsentry('perlcom','perl.com', '5', 'http://www.perl.com') %]
[% newsentry('cpanrecent','Recent CPAN Uploads',10,'http://search.cpan.org/recent') %]
[% newsentry('perlbuzz','Perl Buzz',5,'http://perlbuzz.com/') %]

